<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=device-dpi" />
        
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script type="text/javascript" src="js/jquery2.min.js"></script>
        <script type="text/javascript" src="js/parse-1.3.2.min.js"></script>
        <link href="css/glyphicons.css" rel="stylesheet">
        <link href="css/glyphicons-bootstrap.css" rel="stylesheet">
        <link href="css/index.css" rel="stylesheet">
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <center><h1 id="navbarlogin">pardon <button style="margin-left:20px;" id="loginbutton" type="button" class="btn btn-default navbar-btn">Çıkış Yap</button></h1></center>
                </div>
            </div>
        </nav>
        <center>
        <div id="main">
            <div class="app">
                    <br><br>
                <div id="deviceready" class="blink">
                    <p class="event listening">HAZIRLANIYOR...</p>
                    <p class="event received">KAMERA HAZIR</p>
                </div>
                <p><br><a href="#" class="btn btn-primary btn-lg" id="scan"><span class="glyphicon glyphicon-camera"></span> &nbsp;&nbsp;QR KODU TARAYIN&nbsp;&nbsp;&nbsp;</a><h2 style="color:#000;">veya</h2><a href="#" class="btn btn-primary btn-lg" id="scan"><span class="glyphicon glyphicon-align-justify"></span> KODU GİRİN</a></p>
            </div>
        </div>
        </center>
        <script>
            var signupEmail="";
            var signupPassword="";
            var signupPhone="";
            var signupUsername="";
            var loginUsername="";
            var loginPassword="";
            var restoranlar="";
            Parse.initialize("ukXCJXXJ7nlY3OCQwPtTpuE4VaPrDx78kqUZSBvu", "Rouz8uDO2Tciz6RXl3raMqLYr7tOvA39c5mmQw5P");
            var currentUser = Parse.User.current();
            checkUser();
            function checkUser(){
                if (currentUser) {
                    // do stuff with the user
                } else {
                // show the signup or login page
                    document.getElementById("navbarlogin").innerHTML = "pardon";
                    document.getElementById("main").innerHTML = "<div id=\"mainz\"> <br> <br> <div role=\"tabpanel\" style=\"width:250px;\"> <ul class=\"nav nav-tabs\" role=\"tablist\"> <li role=\"presentation\" class=\"active\"><a href=\"#login\" aria-controls=\"login\" role=\"tab\" data-toggle=\"tab\">Giriş Yap</a></li> <li role=\"presentation\"><a href=\"#signup\" aria-controls=\"signup\" role=\"tab\" data-toggle=\"tab\">Üye Ol</a></li> </ul> <div class=\"tab-content\"> <div role=\"tabpanel\" class=\"tab-pane active\" id=\"login\"> <br> <div class=\"form-group\" style=\"width:250px;\"> <input type=\"text\" class=\"form-control\" id=\"loginusername\" placeholder=\"Kullanıcı adı\"> </div> <div class=\"form-group\" style=\"width:250px;\"> <input type=\"password\" class=\"form-control\" id=\"loginpass\" placeholder=\"Şifre\"> </div> <button type=\"button\" class=\"btn btn-primary\" aria-label=\"Left Align\" onclick=\"loginUser()\">&nbsp; Giriş Yap&nbsp;</button><br><br><div id=\"resultsignup\"></div> </div> <div role=\"tabpanel\" class=\"tab-pane\" id=\"signup\"> <br> <div class=\"form-group\" style=\"width:250px;\"> <input type=\"text\" class=\"form-control\" placeholder=\"Kullanıcı adı\" id=\"signupusername\"> </div><div class=\"form-group\" style=\"width:250px;\"> <input type=\"text\" class=\"form-control\" placeholder=\"Email adresi\" id=\"signupemail\"> </div> <div class=\"form-group\" style=\"width:250px;\"> <input type=\"password\" class=\"form-control\" id=\"signuppass\" placeholder=\"Şifre\"> </div> <div class=\"form-group\" style=\"width:250px;\"> <input type=\"text\" class=\"form-control\" id=\"signupphone\" placeholder=\"Telefon\"> </div> <button type=\"button\" class=\"btn btn-primary\" aria-label=\"Left Align\" onclick=\"createUser()\">&nbsp; Üye Ol &nbsp;</button> </div> </div>";
                }
            }
            function createUser(){
                var user = new Parse.User();
                signupUsername=document.getElementById("signupusername").value
                signupEmail=document.getElementById("signupemail").value;
                signupPassword=document.getElementById("signuppass").value;
                signupPhone=document.getElementById("signupphone").value;
                user.set("username", signupUsername);
                user.set("password", signupPassword);
                user.set("email", signupEmail);
                user.set("phone", signupPhone);
 
                user.signUp(null, {
                    success: function(user) {
                    location.reload();
                    // Hooray! Let them use the app now.
                    document.getElementById("resultsignup").innerHTML = "<div class=\"alert alert-success\" role=\"alert\">Üyelik işlemi başarılı. üyeliğinizin tamamlanabilmesi için onay mailindeki linke tıklayın.</div>";
                    },
                    error: function(user, error) {
                    // Show the error message somewhere and let the user try again.
                    alert("Error: " + error.code + " " + error.message);
                    }
                });
            }
            function loginUser(){
                loginUsername=document.getElementById("loginusername").value;
                loginPassword=document.getElementById("loginpass").value;
                Parse.User.logIn(loginUsername, loginPassword, {
                    success: function(user) {
                        // Do stuff after successful login.
                        document.getElementById("main").innerHTML = "<div class=\"app\"> <br><br> <div id=\"deviceready\" class=\"blink\"> <p class=\"event listening\">HAZIRLANIYOR...</p> <p class=\"event received\">KAMERA HAZIR</p> </div> <p><br><a href=\"#\" class=\"btn btn-primary btn-lg\" id=\"scan\"><span class=\"glyphicon glyphicon-camera\"></span> &nbsp;&nbsp;QR KODU TARAYIN&nbsp;&nbsp;&nbsp;</a><br><br><a href=\"#\" class=\"btn btn-primary btn-lg\" id=\"scan\"><span class=\"glyphicon glyphicon-align-justify\"></span> ÜRÜN KODUNU GİRİN</a></p> </div>";
                    },
                    error: function(user, error) {
                        // The login failed. Check error to see why.
                        document.getElementById("resultsignup").innerHTML = "<div class=\"alert alert-danger\" role=\"alert\">Giriş yapılamadı.Kullanıcı adı ve şifrenizi kontrol edin.</div>";
                    }
                });
            }
        </script>
        <script type="text/javascript" src="cordova.js"></script><script type="text/javascript" src="barcodescanner.js"></script><script type="text/javascript" src="js/index.js"></script><script type="text/javascript">app.initialize();</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><script src="js/bootstrap.min.js"></script>
    </body>
</html>
